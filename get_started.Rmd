---
title: "Getting started with Shiny Dashboard"
output:
  html_document:
    highlight: textmate
---

```{r echo = FALSE, message=FALSE}
library(shiny)
library(shinydashboard)
library(webshot)

knitr::opts_chunk$set(collapse = TRUE, comment = "##")

# Print HTML tags as HTML text
knit_print.shiny.tag <- function(x, ...) {
  as.character(x)
}
```


## Installation

**shinydashboard** requires Shiny 0.11 or above. To install, run:

```{r eval=FALSE}
# First install devtools if you don't already have it installed, with:
# install.packages("devtools")

devtools::install_github("rstudio/shiny")
devtools::install_github("rstudio/shinydashboard")
```

## Basics

A dashboard has three parts: a header, a sidebar, and a body. Here's the most minimal possible UI for a dashboard page.

```{r eval=FALSE}
## ui.R ##
library(shinydashboard)

dashboardPage(
  dashboardHeader(),
  dashboardSidebar(),
  dashboardBody()
)
```


You can quickly view it at the R console by using the `shinyApp()` function. (You can also use this code as a [single-file app](http://shiny.rstudio.com/articles/single-file.html).

```{r eval=FALSE}
## app.R ##
library(shiny)
library(shinydashboard)

ui <- dashboardPage(
  dashboardHeader(),
  dashboardSidebar(),
  dashboardBody()
)

server <- function(input, output) { }

shinyApp(ui, server)
```

```{r eval=FALSE, echo=FALSE}
appshot('_apps/blank_dashboard/', 'images/blank_dashboard.png',
  delay=1, vheight=300
) %>%
  resize('50%') %>%
  shrink()
```

![Blank dashboard](images/blank_dashboard.png)

Obviously, this dashboard isn't very useful. We'll need to add components that actually do something. In the body we can add boxes that have content.

```{r eval=FALSE}
## app.R ##
library(shinydashboard)

ui <- dashboardPage(
  dashboardHeader(title = "Basic dashboard"),
  dashboardSidebar(),
  dashboardBody(
    # Boxes need to be put in a row (or column)
    fluidRow(
      box(plotOutput("plot1", height = 250)),

      box(
        title = "Controls",
        sliderInput("slider", "Number of observations:", 1, 100, 50)
      )
    )
  )
)

server <- function(input, output) {
  set.seed(122)
  histdata <- rnorm(500)

  output$plot1 <- renderPlot({
    data <- histdata[seq_len(input$slider)]
    hist(data)
  })
}

shinyApp(ui, server)
```

```{r eval=FALSE, echo=FALSE}
appshot('_apps/basic/', 'images/basic.png',
  delay=1, vheight=400
) %>%
  resize('75%') %>%
  shrink()
```

![Basic dashboard](images/basic.png)


Next, we can add content to the sidebar. For this example we'll add menu items that behave like tabs. These function similarly to Shiny's `tabPanel`s: when you click on one menu item, it shows a different set of content in the main body.

```{r eval=FALSE}
## Sidebar content
  dashboardSidebar(
    sidebarMenu(
      menuItem("Dashboard", tabName = "dashboard", icon = icon("dashboard")),
      menuItem("Widgets", tabName = "widgets", icon = icon("th"))
    )
  )
```

```{r eval=FALSE}
## Body content
  dashboardBody(
    tabItems(
      # First tab content
      tabItem(tabName = "dashboard",
        fluidRow(
          box(plotOutput("plot1", height = 250)),

          box(
            title = "Controls",
            sliderInput("slider", "Number of observations:", 1, 100, 50)
          )
        )
      ),

      # Second tab content
      tabItem(tabName = "widgets",
        h2("Widgets tab content")
      )
    )
  )
```

```{r eval=FALSE, echo=FALSE}
appshot('_apps/basic-tabs/', 'images/basic-tabs-1.png',
  delay=1, vheight=400
) %>%
  resize('75%') %>%
  shrink()

appshot('_apps/basic-tabs/', 'images/basic-tabs-2.png',
  delay=0.5, vheight=400,
  eval = "casper.then(function() {
    this.click('ul.sidebar-menu > li > a[href=\"#shiny-tab-widgets\"]');
    this.wait(500);
  });"
) %>%
  resize('75%') %>%
  shrink()
```

The default display, also shown when the "Dashboard" menu item is clicked:

![Basic dashboard with tabs 1](images/basic-tabs-1.png)

And the display when "Widgets" is clicked:

![Basic dashboard with tabs 2](images/basic-tabs-2.png)


That covers the very basics of using **shinydashboard**. Before we dive into an in-depth look at the parts of a dashboard, we need to take a step back and understand how a Shiny UI works.


## Background: Shiny and HTML

To understand how these parts work together, we first need to know how a Shiny UI is built, and how it relates to the HTML of a web page.

The HTML tag functions in Shiny, like `div()` and `p()` return objects that can be rendered as HTML. For example, when you run these commands at the R console, it will print out HTML:

```{r}
# A basic div
div(class = "my-class", "Div content")

# Nested HTML tags
div(class = "my-class", p("Paragraph text"))
```

Some functions return more complex HTML fragments, and they insulate you, the user, from having to know all the ins and outs of the HTML required to create things like a text input or a sidebar:

```{r}
textInput("Id", "Label")

sidebarPanel(
  div("First div"),
  div("Second div")
)
```

The UI for a Shiny app is built out of these pieces of HTML. The **shinydashboard** package provides a set of functions designed to create HTML that will generate a dashboard. If you copy the UI code for a dashboard page (above) and paste into the R console, it will print out HTML for the dashboard.


<div class="text-center">
**Next**: learn about the structure of a dashboard.

<a class="btn btn-success btn-lg" href="structure.html" role="button">Continue
<span class="glyphicon glyphicon-arrow-right"></span>
</a>
</div>
